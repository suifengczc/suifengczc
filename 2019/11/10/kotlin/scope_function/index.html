<!DOCTYPE HTML>
<html lang="zh-CN">


<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="keywords" content="kotlin的作用域函数[译], Suifeng Blog">
    <meta name="description" content="Kotlin的作用域函数[译]Kotlin的作用域函数的介绍本文时对kotlin官方文档的翻译，文档地址

The Kotlin standard library contains several functions whose sole ">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>kotlin的作用域函数[译] | Suifeng Blog</title>
    <link rel="icon" type="image/png" href="/favicon.png">
	<link rel="stylesheet" href="/css/sons-of-obsidian.css" media="screen" type="text/css">
    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
	<style> 
		li.L0, li.L1, li.L2, li.L3, li.L4, li.L5, li.L6, li.L7, li.L8, li.L9
		{ list-style-type: decimal !important }
	</style>

    <script src="/libs/jquery/jquery.min.js"></script>
</head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper head-container">
            <div class="brand-logo">
                <a href="../../../../../index.html" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Suifeng Blog</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Suifeng Blog</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			Contact
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/suifengczc" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/suifengczc" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/12.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        kotlin的作用域函数[译]
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="../../../../../tags/kotlin/">
                                <span class="chip bg-color">kotlin</span>
                            </a>
                        
                            <a href="../../../../../tags/scope-function/">
                                <span class="chip bg-color">scope function</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="../../../../../categories/kotlin/" class="post-category">
                                kotlin
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2019-11-10
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2019-11-14
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    5.2k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    25 分
                </div>
                
				
                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
            
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="Kotlin的作用域函数-译"><a href="#Kotlin的作用域函数-译" class="headerlink" title="Kotlin的作用域函数[译]"></a>Kotlin的作用域函数[译]</h1><h2 id="Kotlin的作用域函数的介绍"><a href="#Kotlin的作用域函数的介绍" class="headerlink" title="Kotlin的作用域函数的介绍"></a>Kotlin的作用域函数的介绍</h2><p>本文时对kotlin官方文档的翻译，<a href="https://www.kotlincn.net/docs/reference/scope-functions.html#scope-functions" target="_blank" rel="noopener">文档地址</a></p>
<blockquote>
<p>The Kotlin standard library contains several functions whose sole purpose is to execute a block of code within the context of an object. When you call such a function on an object with a <a href="https://www.kotlincn.net/docs/reference/lambdas.html" target="_blank" rel="noopener">lambda expression</a> provided, it forms a temporary scope. In this scope, you can access the object without its name. Such functions are called <em>scope functions</em>. There are five of them: <code>let</code>, <code>run</code>, <code>with</code>, <code>apply</code>, and <code>also</code> .</p>
<p>Basically, these functions do the same: execute a block of code on an object. What’s different is how this object becomes available inside the block and what is the result of the whole expression.</p>
</blockquote>
<p>kotlin的官方标准库包含了几个函数，这些函数的作用是在对象的上下文内部执行代码块。当你在提供了lambda表达式的对象中调用这些方法时，这将形成一个临时的作用域。在这个作用域中，你可以访问当前对象而不使用它的变量名。这些方法被称为作用域函数。这里共有5个作用域函数，分别为：<code>let</code>,<code>run</code>,<code>with</code>,<code>apply</code>,<code>also</code>。</p>
<p>基本上，这些方法都做了相同的事情：在对象上执行代码块。不同之处在于这个对象在代码块内部如何变得可用以及整个表达式的结果是什么。</p>
<blockquote>
<p>Here’s a typical usage of a scope function: </p>
</blockquote>
<p>这里是一个典型的作用域函数使用方式：</p>
<pre><code class="kotlin">data class Person(var name: String, var age: Int, var city: String) {
    fun moveTo(newCity: String) { city = newCity }
    fun incrementAge() { age++ }
}

fun main() {
    //sampleStart
    Person(&quot;Alice&quot;, 20, &quot;Amsterdam&quot;).let {
        println(it)
        it.moveTo(&quot;London&quot;)
        it.incrementAge()
        println(it)
    }
    //sampleEnd
}</code></pre>
<blockquote>
<p>If you write the same without <code>let</code>, you’ll have to introduce a new variable and repeat its name whenever you use it. </p>
</blockquote>
<p>如果你不使用<code>let</code>这个作用域函数，你需要定义一个变量并且在每个使用到的地方重复它的名字。</p>
<pre><code class="kotlin">data class Person(var name: String, var age: Int, var city: String) {
    fun moveTo(newCity: String) { city = newCity }
    fun incrementAge() { age++ }
}

fun main() {
    //sampleStart
    val alice = Person(&quot;Alice&quot;, 20, &quot;Amsterdam&quot;)
    println(alice)
    alice.moveTo(&quot;London&quot;)
    alice.incrementAge()
    println(alice)
    //sampleEnd
}</code></pre>
<blockquote>
<p>The scope functions do not introduce any new technical capabilities, but they can make your code more concise and readable. </p>
</blockquote>
<p>作用域函数不需要引入任何其他的技术能力，但可以使代码更简明易懂。</p>
<blockquote>
<p>Due to the similar nature of scope functions, choosing the right one for your case can be a bit tricky. The choice mainly depends on your intent and the consistency of use in your project. Below we’ll provide detailed descriptions of the distinctions between scope functions and the conventions on their usage.</p>
</blockquote>
<p>由于作用域函数的相似性，选择一个合适的作用域函数是一件不容易的事情。这个选择主要依赖于你的意图和在项目中的合理性。下面，我们将详细提供关于作用域函数之间的不同和使用惯例的不同。</p>
<h2 id="作用域函数的区别"><a href="#作用域函数的区别" class="headerlink" title="作用域函数的区别"></a>作用域函数的区别</h2><blockquote>
<p>Because the scope functions are all quite similar in nature, it’s important to understand the differences between them. There are two main differences between each scope function: </p>
<ul>
<li>The way to refer to the context object </li>
<li>The return value </li>
</ul>
</blockquote>
<p>由于作用域函数在性质上非常相似，所以明白他们之间的不同非常重要，他们之间有两个主要的不同。</p>
<ul>
<li><p>引用上下文对象的方式</p>
</li>
<li><p>返回值</p>
</li>
</ul>
<h3 id="上下文对象是this还是it"><a href="#上下文对象是this还是it" class="headerlink" title="上下文对象是this还是it"></a>上下文对象是this还是it</h3><blockquote>
<p>Inside the lambda of a scope function, the context object is available by a short reference instead of its actual name. Each scope function uses one of two ways to access the context object: as a <a href="https://www.kotlincn.net/docs/reference/lambdas.html#带有接收者的函数字面值" target="_blank" rel="noopener">lambda receiver</a> (<code>this</code>) or as a lambda argument (<code>it</code>). Both provide the same capabilities, so we’ll describe the pros and cons of each for different cases and provide recommendations on their use. </p>
</blockquote>
<p>在作用域函数的lambda表达式中，上下文对象可以使用短引用的方式替代变量的真实名称。每个作用域函数使用两种访问上下文对象的方式之一：作为lambda接收者(<code>this</code>)或者作为lambda参数(<code>it</code>)。两者提供了相同的功能，所以我们将描述每一个案例下的优缺点并且提供推荐的用法。</p>
<pre><code class="kotlin">fun main() {
    val str = &quot;Hello&quot;
    // this
    str.run {
        println(&quot;The receiver string length: $length&quot;)
        //println(&quot;The receiver string length: ${this.length}&quot;) // does the same
    }

    // it
    str.let {
        println(&quot;The receiver string&#39;s length is ${it.length}&quot;)
    }
}</code></pre>
<h4 id="this"><a href="#this" class="headerlink" title="this"></a>this</h4><blockquote>
<p> <code>run</code>, <code>with</code>, and <code>apply</code> refer to the context object as a lambda receiver - by keyword <code>this</code>. Hence, in their lambdas, the object is available as it would be in ordinary class functions. In most cases, you can omit <code>this</code> when accessing the members of the receiver object, making the code shorter. On the other hand, if <code>this</code> is omitted, it can be hard to distinguish between the receiver members and external objects or functions. So, having the context object as a receiver (<code>this</code>) is recommended for lambdas that mainly operate on the object members: call its functions or assign properties. </p>
</blockquote>
<p><code>run</code>，<code>with</code>，<code>apply</code>通过<code>this</code>关键字引用到上下文对象作为一个lambda接收者。因此，在这些lambda中，该上下文对象就像在普通类方法中一样可用的。在多数情况下，当你访问接收对象的成员时可以忽略<code>this</code>关键字，使得代码更短。另一方面，如果<code>this</code>被省略，这会很难区分接收者的成员和外部对象或方法。因此，更推荐持有上下文对象作为主要操作对象成员的lambda表达式的接收者(<code>this</code>)：调用该对象的方法或指定属性。</p>
<pre><code class="kotlin">data class Person(var name: String, var age: Int = 0, var city: String = &quot;&quot;)

fun main() {
    //sampleStart
    val adam = Person(&quot;Adam&quot;).apply { 
        age = 20                       // same as this.age = 20 or adam.age = 20
        city = &quot;London&quot;
    }
    //sampleEnd
}</code></pre>
<h4 id="it"><a href="#it" class="headerlink" title="it"></a>it</h4><blockquote>
<p> In turn, <code>let</code> and <code>also</code> have the context object as a lambda argument. If the argument name is not specified, the object is accessed by the implicit default name <code>it</code>. <code>it</code> is shorter than <code>this</code> and expressions with <code>it</code> are usually easier for reading. However, when calling the object functions or properties you don’t have the object available implicitly like <code>this</code>. Hence, having the context object as <code>it</code> is better when the object is mostly used as an argument in function calls. <code>it</code> is also better if you use multiple variables in the code block. </p>
</blockquote>
<p>相反的，<code>let</code>和<code>also</code>持有上下文对象作为lambda表达式的参数。如果参数名称是非指定的，那么这个对象就使用隐式的默认名称<code>it</code>访问。<code>it</code>比<code>this</code>更短，并且使用<code>it</code>的表达式通常更容易阅读。但是，当调用对象的方法或属性时你没有像<code>this</code>方式一样的隐式可用对象。因此，当主要使用对象作为方法调用中的参数时，最好使用<code>it</code>的方式持有上下文对象。同样如果在代码块中多次使用变量使用<code>it</code>也是更好的方式。</p>
<pre><code class="kotlin">import kotlin.random.Random

fun writeToLog(message: String) {
    println(&quot;INFO: $message&quot;)
}

fun main() {
    //sampleStart
    fun getRandomInt(): Int {
        return Random.nextInt(100).also {    
            writeToLog(&quot;getRandomInt() generated value $it&quot;)
        }
    }

    val i = getRandomInt()
    //sampleEnd
}</code></pre>
<blockquote>
<p>Additionally, when you pass the context object as an argument, you can provide a custom name for the context object inside the scope. </p>
</blockquote>
<p>另外，当你将上下文对象作为参数传递时，你可以为该对象提供一个在当前作用域内使用的自定义名称。</p>
<pre><code class="kotlin">import kotlin.random.Random

fun writeToLog(message: String) {
    println(&quot;INFO: $message&quot;)
}

fun main() {
    //sampleStart
    fun getRandomInt(): Int {
        return Random.nextInt(100).also { value -&gt;
            writeToLog(&quot;getRandomInt() generated value $value&quot;)
        }
    }

    val i = getRandomInt()
    //sampleEnd
}</code></pre>
<h3 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h3><blockquote>
<p>The scope functions differ by the result they return</p>
<ul>
<li><p><code>apply</code> and <code>also</code> return the context object .</p>
</li>
<li><p><code>let</code>, <code>run</code>, and <code>with</code> return the lambda result .</p>
</li>
</ul>
<p>These two options let you choose the proper function depending on what you do next in your code.</p>
</blockquote>
<p>作用域函数的不同在于返回结果的不同。</p>
<ul>
<li><code>apply</code>和<code>also</code>返回上下文对象</li>
<li><code>let</code>，<code>run</code>，<code>with</code>返回lambda的结果 </li>
</ul>
<p>根据你在后续代码中的行为从两个选项中合适的方法。</p>
<h4 id="上下文对象"><a href="#上下文对象" class="headerlink" title="上下文对象"></a>上下文对象</h4><blockquote>
<p> The return value of <code>apply</code> and <code>also</code> is the context object itself. Hence, they can be included into call chains as <em>side steps</em>: you can continue chaining function calls on the same object after them. </p>
</blockquote>
<p><code>apply</code>和<code>alse</code>的返回值是上下文对象自身。因此，他们可以被包括到调用链中作为连续步骤：你可以在同一个对象上继续链接方法调用。</p>
<pre><code class="kotlin">fun main() {
    //sampleStart
    val numberList = mutableListOf&lt;Double&gt;()
    numberList.also { println(&quot;Populating the list&quot;) }
        .apply {
            add(2.71)
            add(3.14)
            add(1.0)
        }
        .also { println(&quot;Sorting the list&quot;) }
        .sort()
    //sampleEnd
    println(numberList)
}</code></pre>
<blockquote>
<p>They also can be used in return statements of functions returning the context object.</p>
</blockquote>
<p>他们同样可以被应用在返回上下文对象的方法return语句中。</p>
<pre><code class="kotlin">import kotlin.random.Random

fun writeToLog(message: String) {
    println(&quot;INFO: $message&quot;)
}

fun main() {
    //sampleStart
    fun getRandomInt(): Int {
        return Random.nextInt(100).also {
            writeToLog(&quot;getRandomInt() generated value $it&quot;)
        }
    }

    val i = getRandomInt()
    //sampleEnd
}</code></pre>
<h4 id="Lambda表达式结果"><a href="#Lambda表达式结果" class="headerlink" title="Lambda表达式结果"></a>Lambda表达式结果</h4><blockquote>
<p><code>let</code>, <code>run</code>, and <code>with</code> return the lambda result. So, you can use them when assigning the result to a variable, chaining operations on the result, and so on. </p>
</blockquote>
<p><code>let</code>，<code>run</code>和<code>with</code>都返回lambda的结果。因此，你可以在需要将结果赋值给变量，对结果继续链接操作等等情况下选择这三种作用域函数。</p>
<pre><code class="kotlin">fun main() {
    //sampleStart
    val numbers = mutableListOf(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;)
    val countEndsWithE = numbers.run {
        add(&quot;four&quot;)
        add(&quot;five&quot;)
        count { it.endsWith(&quot;e&quot;) }
    }
    println(&quot;There are $countEndsWithE elements that end with e.&quot;)
    //sampleEnd
}</code></pre>
<blockquote>
<p>Additionally, you can ignore the return value and use a scope function to create a temporary scope for variables.</p>
</blockquote>
<p>另外，你可以忽略返回值并且使用作用域函数为变量创建临时作用域。</p>
<pre><code class="kotlin">fun main() {
    //sampleStart
    val numbers = mutableListOf(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;)
    with(numbers) {
        val firstItem = first()
        val lastItem = last()        
        println(&quot;First item: $firstItem, last item: $lastItem&quot;)
    }
    //sampleEnd
}</code></pre>
<h2 id="函数介绍"><a href="#函数介绍" class="headerlink" title="函数介绍"></a>函数介绍</h2><blockquote>
<p>To help you choose the right scope function for your case, we’ll describe them in detail and provide usage recommendations. Technically, functions are interchangeable in many cases, so the examples show the conventions that define the common usage style. </p>
</blockquote>
<p>为了帮助你选择正确的作用域函数，我们将详细描述他们并且提供使用建议。从技术上讲，在许多情况下作用域函数是互通的，因此下面的例子展示了约定俗成的默认的常用使用方式。</p>
<h3 id="let"><a href="#let" class="headerlink" title="let"></a>let</h3><blockquote>
<p><strong>The context object</strong> is available as an argument (<code>it</code>). <strong>The return value</strong> is the lambda result.</p>
<p><code>let</code> can be used to invoke one or more functions on results of call chains. For example, the following code prints the results of two operations on a collection:</p>
</blockquote>
<p>上下文对象可用作参数(<code>it</code>)，返回值是lambda表达式的结果。</p>
<p><code>let</code>可以用于在调用链的结果上调用一个或多个方法。例如，下面的代码打印了一个集合在两个操作后的结果。</p>
<pre><code class="kotlin">fun main() {
    //sampleStart
    val numbers = mutableListOf(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;, &quot;five&quot;)
    val resultList = numbers.map { it.length }.filter { it &gt; 3 }
    println(resultList)    
    //sampleEnd
}</code></pre>
<p>使用<code>let</code>，你可以重写成这个形式：</p>
<pre><code class="kotlin">fun main() {
    //sampleStart
    val numbers = mutableListOf(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;, &quot;five&quot;)
    numbers.map { it.length }.filter { it &gt; 3 }.let { 
        println(it)
        // and more function calls if needed
        // 需要的话可以调用其他方法
    } 
    //sampleEnd
}</code></pre>
<blockquote>
<p> If the code block contains a single function with <code>it</code> as an argument, you can use the method reference (<code>::</code>) instead of the lambda: </p>
</blockquote>
<p>如果代码块中只包含单个方法并且使用了<code>it</code>作为参数，那么你可以使用方法引用<code>(::)</code>替代lambda表达式。</p>
<pre><code class="kotlin">fun main() {
    //sampleStart
    val numbers = mutableListOf(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;, &quot;five&quot;)
    numbers.map { it.length }.filter { it &gt; 3 }.let(::println)
    //等效于.let{ println(it) }
    //sampleEnd
}</code></pre>
<blockquote>
<p> <code>let</code> is often used for executing a code block only with non-null values. To perform actions on a non-null object, use the safe call operator <code>?.</code> on it and call <code>let</code> with the actions in its lambda. </p>
</blockquote>
<p><code>let</code>通常用于执行仅使用非空值的代码块。为了对非空对象执行操作，应该使用安全操作符<code>?.</code>并且调用<code>let</code>在lambda中执行操作。</p>
<pre><code class="kotlin">fun processNonNullString(str: String) {}

fun main() {
    //sampleStart
    val str: String? = &quot;Hello&quot;   
    //processNonNullString(str)       // compilation error: str can be null
    val length = str?.let { 
        // 因为使用了?.操作符，当str为null时不会执行到lambda代码块的内容，
        // 保证了processNonNullString()方法不会传入空值
        println(&quot;let() called on $it&quot;)        
        processNonNullString(it)      // OK: &#39;it&#39; is not null inside &#39;?.let { }&#39;
        it.length
    }
    //sampleEnd
}</code></pre>
<blockquote>
<p>Another case for using <code>let</code> is introducing local variables with a limited scope for improving code readability. To define a new variable for the context object, provide its name as the lambda argument so that it can be used instead of the default <code>it</code>. </p>
</blockquote>
<p>另一个使用<code>let</code>的案例是在有限的作用域内引入局部变量以提高代码可读性。为了给上下文对象定义一个新变量，为lambda提供一个名称作为参数这样可以使用新名称而不是默认的<code>it</code>。</p>
<h3 id="with"><a href="#with" class="headerlink" title="with"></a>with</h3><blockquote>
<p> A non-extension function: <strong>the context object</strong> is passed as an argument, but inside the lambda, it’s available as a receiver (<code>this</code>). <strong>The return value</strong> is the lambda result. </p>
<p> We recommend <code>with</code> for calling functions on the context object without providing the lambda result. In the code, <code>with</code> can be read as “<em>with this object, do the following.</em>” </p>
</blockquote>
<p>一个非拓展方法：上下文对象是作为参数传递的，但是在lambda内部，它作为一个接收者(<code>this</code>)。返回值是lambda的结果。</p>
<p>我们推荐在不需要提供lambda结果的情况下使用<code>with</code>在上下文对象上调用函数。在代码中<code>with</code>可以解释为“在这个对象上执行如下操作”</p>
<pre><code class="kotlin">fun main() {
    //sampleStart
    val numbers = mutableListOf(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;)
    with(numbers) {
        println(&quot;&#39;with&#39; is called with argument $this&quot;)
        println(&quot;It contains $size elements&quot;)
    }
    //sampleEnd
}</code></pre>
<blockquote>
<p> Another use case for <code>with</code> is introducing a helper object whose properties or functions will be used for calculating a value. </p>
</blockquote>
<p>另一个使用<code>with</code>的案例是引入一个辅助对象其属性和方法可以用于计算值。</p>
<pre><code class="kotlin">fun main() {
    //sampleStart
    val numbers = mutableListOf(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;)
    val firstAndLast = with(numbers) {
        &quot;The first element is ${first()},&quot; +
        &quot; the last element is ${last()}&quot;
    }
    println(firstAndLast)
    //sampleEnd
}</code></pre>
<h3 id="run"><a href="#run" class="headerlink" title="run"></a>run</h3><blockquote>
<p><strong>The context object</strong> is available as a receiver (<code>this</code>). <strong>The return value</strong> is the lambda result. </p>
<p> <code>run</code> does the same as <code>with</code> but invokes as <code>let</code> - as an extension function of the context object. </p>
<p> <code>run</code> is useful when your lambda contains both the object initialization and the computation of the return value. </p>
</blockquote>
<p>上下文对象可用作接收者(<code>this</code>)，返回值是lambda结果。</p>
<p><code>run</code>和<code>with</code>有相同功能，按照<code>let</code>的调用方式 -作为上下文对象的拓展方法。</p>
<p><code>run</code>很有效当你的lambda表达式中都包含了对象初始化和返回值的计算。</p>
<pre><code class="kotlin">class MultiportService(var url: String, var port: Int) {
    fun prepareRequest(): String = &quot;Default request&quot;
    fun query(request: String): String = &quot;Result for query &#39;$request&#39;&quot;
}

fun main() {
    //sampleStart
    val service = MultiportService(&quot;https://example.kotlinlang.org&quot;, 80)

    val result = service.run {
        port = 8080
        query(prepareRequest() + &quot; to port $port&quot;)
    }

    // the same code written with let() function:
    val letResult = service.let {
        it.port = 8080
        it.query(it.prepareRequest() + &quot; to port ${it.port}&quot;)
    }
    //sampleEnd
    println(result)
    println(letResult)
}</code></pre>
<blockquote>
<p>Besides calling <code>run</code> on a receiver object, you can use it as a non-extension function. Non-extension <code>run</code> lets you execute a block of several statements where an expression is required. </p>
</blockquote>
<p>除了在接收者对象上调用<code>run</code>方法之外，你还可以使用它作为非拓展方法。非拓展的<code>run</code>使你可以在需要表达式时执行一个包含多个语句的代码块。</p>
<pre><code class="kotlin">fun main() {
    //sampleStart
    val hexNumberRegex = run {
        val digits = &quot;0-9&quot;
        val hexDigits = &quot;A-Fa-f&quot;
        val sign = &quot;+-&quot;

        Regex(&quot;[$sign]?[$digits$hexDigits]+&quot;)
    }

    for (match in hexNumberRegex.findAll(&quot;+1234 -FFFF not-a-number&quot;)) {
        println(match.value)
    }
    //sampleEnd
}</code></pre>
<h3 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h3><blockquote>
<p><strong>The context object</strong> is available as a receiver (<code>this</code>). <strong>The return value</strong> is the object itself. </p>
<p> Use <code>apply</code> for code blocks that don’t return a value and mainly operate on the members of the receiver object. The common case for <code>apply</code> is the object configuration. Such calls can be read as “<em>apply the following assignments to the object.</em>” </p>
</blockquote>
<p>上下文对象作为接收者(<code>this</code>)，返回值是上下文对象本身。</p>
<p><code>apply</code>用于不返回值并且主要操作于接受对象的成员的代码块，常见的<code>apply</code>使用场景是对象的配置。<code>apply</code>方法可以解释为“应用如下的分配到对象”</p>
<pre><code class="kotlin">data class Person(var name: String, var age: Int = 0, var city: String = &quot;&quot;)

fun main() {
    //sampleStart
    val adam = Person(&quot;Adam&quot;).apply {
        age = 32
        city = &quot;London&quot;        
    }
    //sampleEnd
}</code></pre>
<blockquote>
<p>Having the receiver as the return value, you can easily include <code>apply</code> into call chains for more complex processing. </p>
</blockquote>
<p>持有接收者作为返回值，你可以更容易地把<code>apply</code>包括到调用链中以实现更复杂的处理。</p>
<h3 id="also"><a href="#also" class="headerlink" title="also"></a>also</h3><blockquote>
<p> <strong>The context object</strong> is available as an argument (<code>it</code>). <strong>The return value</strong> is the object itself. </p>
<p> <code>also</code> is good for performing some actions that take the context object as an argument. Use <code>also</code> for additional actions that don’t alter the object, such as logging or printing debug information. Usually, you can remove the calls of <code>also</code> from the call chain without breaking the program logic. </p>
<p>When you see <code>also</code> in the code, you can read it as “<em>and also do the following</em>”. </p>
</blockquote>
<p>上下文对象作为参数(<code>it</code>)，返回值是上下文对象自身。</p>
<p><code>also</code>对一些将上下文对象作为参数传递的行为很有用。对于其他不改变上下文对象例如log或者打印调试信息的行为也可以使用<code>also</code>。通常，你可以从调用链中移除<code>also</code>调用而不影响原有程序逻辑。</p>
<p>当你在代码中看到<code>also</code>时，你可以将其解释为“并且执行如下操作”</p>
<pre><code class="kotlin">fun main() {
    //sampleStart
    val numbers = mutableListOf(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;)
    numbers
        .also { println(&quot;The list elements before adding new one: $it&quot;) }
        .add(&quot;four&quot;)
    //sampleEnd
}</code></pre>
<h2 id="函数选择"><a href="#函数选择" class="headerlink" title="函数选择"></a>函数选择</h2><blockquote>
<p>To help you choose the right scope function for your purpose, we provide the table of key differences between them. </p>
</blockquote>
<p>为了帮助你选择正确的作用域函数，我们提供了他们的主要区别表</p>
<table>
<thead>
<tr>
<th align="center">方法名</th>
<th align="center">对象引用</th>
<th align="center">返回值</th>
<th align="left">是否拓展函数</th>
</tr>
</thead>
<tbody><tr>
<td align="center">let</td>
<td align="center">it</td>
<td align="center">Lambda结果</td>
<td align="left">是</td>
</tr>
<tr>
<td align="center">run</td>
<td align="center">this</td>
<td align="center">Lambda结果</td>
<td align="left">是</td>
</tr>
<tr>
<td align="center">run</td>
<td align="center">-</td>
<td align="center">Lambda结果</td>
<td align="left">否：无上下文对象调用</td>
</tr>
<tr>
<td align="center">with</td>
<td align="center">this</td>
<td align="center">Lambda结果</td>
<td align="left">否：上下文对象作为参数传递</td>
</tr>
<tr>
<td align="center">apply</td>
<td align="center">this</td>
<td align="center">Context object</td>
<td align="left">是</td>
</tr>
<tr>
<td align="center">also</td>
<td align="center">it</td>
<td align="center">Context object</td>
<td align="left">是</td>
</tr>
</tbody></table>
<blockquote>
<p>Here is a short guide for choosing scope functions depending on the intended purpose: </p>
<ul>
<li>Executing a lambda on non-null objects: <code>let</code></li>
<li>Introducing an expression as a variable in local scope: <code>let</code></li>
<li>Object configuration: <code>apply</code></li>
<li>Object configuration and computing the result: <code>run</code></li>
<li>Running statements where an expression is required: non-extension <code>run</code></li>
<li>Additional effects: <code>also</code></li>
<li>Grouping function calls on an object: <code>with</code></li>
</ul>
<p>The use cases of different functions overlap, so that you can choose the functions based on the specific conventions used in your project or team.</p>
<p>Although the scope functions are a way of making the code more concise, avoid overusing them: it can decrease your code readability and lead to errors. Avoid nesting scope functions and be careful when chaining them: it’s easy to get confused about the current context object and the value of <code>this</code> or <code>it</code>.</p>
</blockquote>
<p>如下是根据预期目的选择合适作用域函数的简单指南。</p>
<ul>
<li>在一个非空对象上执行一个lambda表达式：<code>let</code></li>
<li>引入一个表达式作为局部作用域中的变量：<code>let</code></li>
<li>对象配置：<code>apply</code></li>
<li>对象配置并且计算结果：<code>run</code></li>
<li>需要表达式的运行语句：非扩展的<code>run</code></li>
<li>附加效果：<code>also</code></li>
<li>一个对象上的一组方法调用：<code>with</code></li>
</ul>
<p>不同方法之间的使用场景存在重叠的情况，所以你可以根据你的项目或团队指定的使用约定来选择合适的作用域函数。</p>
<p>虽然作用域函数是使代码更简洁的方法，但应该避免过度使用它们：这会降低代码的可读性并容易导致错误。避免嵌套使用作用域函数并且在链式调用时要注意：因为这很容易导致对当前的上下文对象的混乱和对<code>this</code>，<code>it</code>的混乱。</p>
<h2 id="takeIf-与-takeUnless"><a href="#takeIf-与-takeUnless" class="headerlink" title="takeIf 与 takeUnless"></a>takeIf 与 takeUnless</h2><blockquote>
<p>In addition to scope functions, the standard library contains the functions <code>takeIf</code> and <code>takeUnless</code>. These functions let you embed checks of the object state in call chains. </p>
</blockquote>
<p>除了作用域函数之外，Kotlin标准库还包含了<code>takeIf</code>和<code>takeUnless</code>两个方法。这两个方法使你可以可以在调用链中检查对象的状态。</p>
<blockquote>
<p>When called on an object with a predicate provided, <code>takeIf</code> returns this object if it matches the predicate. Otherwise, it returns <code>null</code>. So, <code>takeIf</code> is a filtering function for a single object. In turn, <code>takeUnless</code> returns the object if it doesn’t match the predicate and <code>null</code> if it does. The object is available as a lambda argument (<code>it</code>). </p>
</blockquote>
<p>当在提供了predicate的对象上调用时，<code>takeIf</code>返回对象本身如果它是匹配predicate的。否则，返回<code>null</code>。因此，<code>takeIf</code>是一个对单个对象的过滤方法。相反的，<code>takeUnless</code>返回对象本身如果它不匹配predicate，返回<code>null</code>如果它匹配。这个对象在lambda中作为参数可用(<code>it</code>)。</p>
<pre><code class="kotlin">import kotlin.random.*

fun main() {
    //sampleStart
    val number = Random.nextInt(100)

    val evenOrNull = number.takeIf { it % 2 == 0 }
    val oddOrNull = number.takeUnless { it % 2 == 0 }
    println(&quot;even: $evenOrNull, odd: $oddOrNull&quot;)
    //sampleEnd
}</code></pre>
<blockquote>
<p>When chaining other functions after <code>takeIf</code> and <code>takeUnless</code>, don’t forget to perform the null check or the safe call (<code>?.</code>) because their return value is nullable. </p>
</blockquote>
<p>在<code>takeIf</code>或<code>takeUnless</code>后链接其他方法时不要忘记执行null检查或者使用安全调用符号<code>?.</code>，因为它们的返回值是可为空的。</p>
<pre><code class="kotlin">fun main() {
    //sampleStart
    val str = &quot;Hello&quot;
    val caps = str.takeIf { it.isNotEmpty() }?.toUpperCase()
       //val caps = str.takeIf { it.isNotEmpty() }.toUpperCase() //compilation error
    println(caps)
    //sampleEnd
}</code></pre>
<blockquote>
<p><code>takeIf</code> and <code>takeUnless</code> are especially useful together with scope functions. A good case is chaining them with <code>let</code> for running a code block on objects that match the given predicate. To do this, call <code>takeIf</code> on the object and then call <code>let</code> with a safe call (<code>?</code>). For objects that don’t match the predicate, <code>takeIf</code> returns <code>null</code> and <code>let</code> isn’t invoked. </p>
</blockquote>
<p><code>takeIf</code>和<code>takeUnless</code>和作用域函数一起使用是非常有用的。一个合适的使用场景是使用<code>let</code>链接它们，用来在一个匹配给定的 predicate 的对象上运行代码块。为了这样做，在对象上调用<code>takeIf</code>然后使用<code>?.</code>调用<code>let</code>。对于不匹配 predicate 的对象，<code>takeIf</code>返回<code>null</code>并且不会被<code>let</code>调用。</p>
<pre><code class="kotlin">fun main() {
    //sampleStart
    fun displaySubstringPosition(input: String, sub: String) {
        input.indexOf(sub).takeIf { it &gt;= 0 }?.let {
            println(&quot;The substring $sub is found in $input.&quot;)
            println(&quot;Its start position is $it.&quot;)
        }
    }

    displaySubstringPosition(&quot;010000011&quot;, &quot;11&quot;)
    displaySubstringPosition(&quot;010000011&quot;, &quot;12&quot;)
    //sampleEnd
}</code></pre>
<blockquote>
<p>This is how the same function looks without the standard library functions:</p>
</blockquote>
<p>下面是不使用标准库函数时的代码：</p>
<pre><code class="kotlin">fun main() {
    //sampleStart
    fun displaySubstringPosition(input: String, sub: String) {
        val index = input.indexOf(sub)
        if (index &gt;= 0) {
            println(&quot;The substring $sub is found in $input.&quot;)
            println(&quot;Its start position is $index.&quot;)
        }
    }

    displaySubstringPosition(&quot;010000011&quot;, &quot;11&quot;)
    displaySubstringPosition(&quot;010000011&quot;, &quot;12&quot;)
    //sampleEnd
}</code></pre>

            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://suifengczc.github.io" rel="external nofollow noreferrer">suifeng</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://suifengczc.github.io">https://suifengczc.github.io</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="https://suifengczc.github.io" target="_blank">suifeng</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="../../../../../tags/kotlin/">
                                    <span class="chip bg-color">kotlin</span>
                                </a>
                            
                                <a href="../../../../../tags/scope-function/">
                                    <span class="chip bg-color">scope function</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            
        </div>
    </div>

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="../../../12/tools/sublime/add_rightmenu/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/9.jpg" class="responsive-img" alt="sublime设置文件夹右键菜单">
                        
                        <span class="card-title">sublime设置文件夹右键菜单</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            sublime text3设置文件夹右键菜单安装完sublime后会默认在右键菜单中添加Open With Sublime Text选项。但是没有应用图标，不够美观，我们可以为它添加图标并且添加文件夹的右键打开方式。
sublime tex
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2019-11-12
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="../../../../../categories/tools/" class="post-category">
                                    tools
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="../../../../../tags/tools/">
                        <span class="chip bg-color">tools</span>
                    </a>
                    
                    <a href="../../../../../tags/sublime/">
                        <span class="chip bg-color">sublime</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="../../../../10/26/hello-world/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/12.jpg" class="responsive-img" alt="Hello World">
                        
                        <span class="card-title">Hello World</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hex
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2019-10-26
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            suifeng
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        newdiv.style.whiteSpace = 'pre'; //增加这个属性，以防止空格缩进被去除
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: Suifeng Blog<br />'
            + '文章作者: suifeng<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>

    
<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>

    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>
    

</main>



    <footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">年份</span>
            <a href="https://suifengczc.github.io" target="_blank">suifeng</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">11.7k</span>&nbsp;
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script src="/js/prettify.js"></script>
            <script type="text/javascript">
                $(document).ready(function(){
                    $('pre').addClass('prettyprint linenums');
                    prettyPrint();
                })
            </script>
            <script>
                function siteTime() {
                    window.setTimeout("siteTime()", 1000);
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2019";
                    var startMonth = "3";
                    var startDate = "3";
                    var startHour = "0";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/suifengczc" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:ssuifengczc@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->


    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    
    
    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>